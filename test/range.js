var test = require("tape")
  , semver = require("../")


test("range tests", function (t) {
// [range, version]
// version should be included by range
; [ ["1.0.0 - 2.0.0", "1.2.3"]
  , ["1.0.0", "1.0.0"]
  , [">=*", "0.2.4"]
  , ["", "1.0.0"]
  , ["*", "1.2.3"]
  , ["*", "v1.2.3-foo"]
  , [">=1.0.0", "1.0.0"]
  , [">=1.0.0", "1.0.1"]
  , [">=1.0.0", "1.1.0"]
  , [">1.0.0", "1.0.1"]
  , [">1.0.0", "1.1.0"]
  , ["<=2.0.0", "2.0.0"]
  , ["<=2.0.0", "1.9999.9999"]
  , ["<=2.0.0", "0.2.9"]
  , ["<2.0.0", "1.9999.9999"]
  , ["<2.0.0", "0.2.9"]
  , [">= 1.0.0", "1.0.0"]
  , [">=  1.0.0", "1.0.1"]
  , [">=   1.0.0", "1.1.0"]
  , ["> 1.0.0", "1.0.1"]
  , [">  1.0.0", "1.1.0"]
  , ["<=   2.0.0", "2.0.0"]
  , ["<= 2.0.0", "1.9999.9999"]
  , ["<=  2.0.0", "0.2.9"]
  , ["<    2.0.0", "1.9999.9999"]
  , ["<\t2.0.0", "0.2.9"]
  , [">=0.1.97", "v0.1.97"]
  , [">=0.1.97", "0.1.97"]
//  , ["0.1.20 || 1.2.4", "1.2.4"]

// I don't care about wacky ranges like this,
// as long as ~x.y.z and 1.0.x works.
// that is what people actually use

  //, [">=0.2.3 || <0.0.1", "0.0.0"]
  //, [">=0.2.3 || <0.0.1", "0.2.3"]
  //, [">=0.2.3 || <0.0.1", "0.2.4"]
//  , ["||", "1.3.4"]
  , ["2.x.x", "2.1.3"]
  , ["1.2.x", "1.2.3"]
//  , ["1.2.x || 2.x", "2.1.3"]
//  , ["1.2.x || 2.x", "1.2.3"]
  , ["x", "1.2.3"]
  , ["2.*.*", "2.1.3"]
  , ["1.2.*", "1.2.3"]
//NOT SUPPORTED
//  , ["1.2.* || 2.*", "2.1.3"]
//  , ["1.2.* || 2.*", "1.2.3"]
  , ["*", "1.2.3"]
  , ["2", "2.1.2"]
  , ["2.3", "2.3.1"]
  , ["~2.4", "2.4.0"] // >=2.4.0 <2.5.0
  , ["~2.4", "2.4.5"]
  , ["~>3.2.1", "3.2.2"] // >=3.2.1 <3.3.0
  , ["~1", "1.2.3"] // >=1.0.0 <2.0.0
  , ["~>1", "1.2.3"]
  , ["~> 1", "1.2.3"]
  , ["~1.0", "1.0.2"] // >=1.0.0 <1.1.0
  , ["~ 1.0", "1.0.2"]
  , ["~ 1.0.3", "1.0.12"]
  , [">=1", "1.0.0"]
  , [">= 1", "1.0.0"]
  , ["<1.2", "1.1.1"]
  , ["< 1.2", "1.1.1"]
  , ["1", "1.0.0beta"]
  , ["~v0.5.4-pre", "0.5.5"]
  , ["~v0.5.4-pre", "0.5.4"]
  , ["=0.7.x", "0.7.2"]
  , [">=0.7.x", "0.7.2"]
  , ["=0.7.x", "0.7.0-asdf"]
  , [">=0.7.x", "0.7.0-asdf"]
  , ["<=0.7.x", "0.6.2"]
//  , ["~1.2.1 >=1.2.3", "1.2.3"]
//  , ["~1.2.1 =1.2.3", "1.2.3"]
  , ["~1.2.1 1.2.3", "1.2.3"]

//  , ['~1.2.1 >=1.2.3 1.2.3', '1.2.3']
  , ['~1.2.1 1.2.3 >=1.2.3', '1.2.3']
  , ['~1.2.1 1.2.3', '1.2.3']
  , ['>=1.2.1 1.2.3', '1.2.3']
  , ['1.2.3 >=1.2.1', '1.2.3']
  , ['>=1.2.3 >=1.2.1', '1.2.3']
  , ['>=1.2.1 >=1.2.3', '1.2.3']
  , ['^1.2.3', '1.8.1']
  , ['^1.2.3', '1.2.3-beta']
  , ['^0.1.2', '0.1.2']
  , ['^0.1', '0.1.2']
  , ['^1.2', '1.4.2']
  , ['^1.2 ^1', '1.4.2']
  , ['^1.2', '1.2.0-pre']
  , ['^1.2.3', '1.2.3-pre']
  , ['~2.2.0rc', '2.2.0']
  , ['1.0.2-1.2.3', '1.0.2-1.2.3']
  ].forEach(function (v) {
//    t.ok(satisfies(v[1], v[0]), v[0]+" satisfied by "+v[1])
    var v1 = semver.pad(v[1])
    var range = semver.range(v[0])
    console.log(range, v[0], v[1])
    if(range.start)
      t.ok(range.start <= v1
        , v1 + ' comes after ' + range.start)
    if(range.end)
      t.ok(range.end >= v1
        , v1 + ' comes before ' + range.end)
  })
  t.end()
})


return

test("\ncomparators test", function (t) {
// [range, comparators]
// turn range into a set of individual comparators
; [ ["1.0.0 - 2.0.0", [[">=1.0.0", "<=2.0.0"]] ]
  , ["1.0.0", [["1.0.0"]] ]
  , [">=*", [[">=0.0.0-"]] ]
  , ["", [[""]]]
  , ["*", [[""]] ]
  , ["*", [[""]] ]
  , [">=1.0.0", [[">=1.0.0"]] ]
  , [">=1.0.0", [[">=1.0.0"]] ]
  , [">=1.0.0", [[">=1.0.0"]] ]
  , [">1.0.0", [[">1.0.0"]] ]
  , [">1.0.0", [[">1.0.0"]] ]
  , ["<=2.0.0", [["<=2.0.0"]] ]
  , ["1", [[">=1.0.0-", "<2.0.0-"]] ]
  , ["<=2.0.0", [["<=2.0.0"]] ]
  , ["<=2.0.0", [["<=2.0.0"]] ]
  , ["<2.0.0", [["<2.0.0"]] ]
  , ["<2.0.0", [["<2.0.0"]] ]
  , [">= 1.0.0", [[">=1.0.0"]] ]
  , [">=  1.0.0", [[">=1.0.0"]] ]
  , [">=   1.0.0", [[">=1.0.0"]] ]
  , ["> 1.0.0", [[">1.0.0"]] ]
  , [">  1.0.0", [[">1.0.0"]] ]
  , ["<=   2.0.0", [["<=2.0.0"]] ]
  , ["<= 2.0.0", [["<=2.0.0"]] ]
  , ["<=  2.0.0", [["<=2.0.0"]] ]
  , ["<    2.0.0", [["<2.0.0"]] ]
  , ["<\t2.0.0", [["<2.0.0"]] ]
  , [">=0.1.97", [[">=0.1.97"]] ]
  , [">=0.1.97", [[">=0.1.97"]] ]
  , ["0.1.20 || 1.2.4", [["0.1.20"], ["1.2.4"]] ]
  , [">=0.2.3 || <0.0.1", [[">=0.2.3"], ["<0.0.1"]] ]
  , [">=0.2.3 || <0.0.1", [[">=0.2.3"], ["<0.0.1"]] ]
  , [">=0.2.3 || <0.0.1", [[">=0.2.3"], ["<0.0.1"]] ]
  , ["||", [[""], [""]] ]
  , ["2.x.x", [[">=2.0.0-", "<3.0.0-"]] ]
  , ["1.2.x", [[">=1.2.0-", "<1.3.0-"]] ]
  , ["1.2.x || 2.x", [[">=1.2.0-", "<1.3.0-"], [">=2.0.0-", "<3.0.0-"]] ]
  , ["1.2.x || 2.x", [[">=1.2.0-", "<1.3.0-"], [">=2.0.0-", "<3.0.0-"]] ]
  , ["x", [[""]] ]
  , ["2.*.*", [[">=2.0.0-", "<3.0.0-"]] ]
  , ["1.2.*", [[">=1.2.0-", "<1.3.0-"]] ]
  , ["1.2.* || 2.*", [[">=1.2.0-", "<1.3.0-"], [">=2.0.0-", "<3.0.0-"]] ]
  , ["1.2.* || 2.*", [[">=1.2.0-", "<1.3.0-"], [">=2.0.0-", "<3.0.0-"]] ]
  , ["*", [[""]] ]
  , ["2", [[">=2.0.0-", "<3.0.0-"]] ]
  , ["2.3", [[">=2.3.0-", "<2.4.0-"]] ]
  , ["~2.4", [[">=2.4.0-", "<2.5.0-"]] ]
  , ["~2.4", [[">=2.4.0-", "<2.5.0-"]] ]
  , ["~>3.2.1", [[">=3.2.1-", "<3.3.0-"]] ]
  , ["~1", [[">=1.0.0-", "<2.0.0-"]] ]
  , ["~>1", [[">=1.0.0-", "<2.0.0-"]] ]
  , ["~> 1", [[">=1.0.0-", "<2.0.0-"]] ]
  , ["~1.0", [[">=1.0.0-", "<1.1.0-"]] ]
  , ["~ 1.0", [[">=1.0.0-", "<1.1.0-"]] ]
  , ["~ 1.0.3", [[">=1.0.3-", "<1.1.0-"]] ]
  , ["~> 1.0.3", [[">=1.0.3-", "<1.1.0-"]] ]
  , ["<1", [["<1.0.0-"]] ]
  , ["< 1", [["<1.0.0-"]] ]
  , [">=1", [[">=1.0.0-"]] ]
  , [">= 1", [[">=1.0.0-"]] ]
  , ["<1.2", [["<1.2.0-"]] ]
  , ["< 1.2", [["<1.2.0-"]] ]
  , ["1", [[">=1.0.0-", "<2.0.0-"]] ]
  , ["1 2", [[">=1.0.0-", "<2.0.0-", ">=2.0.0-", "<3.0.0-"]] ]
  ].forEach(function (v) {
    console.log(
    semver.range(v[0]),
    '//v[1]')
    
//    t.equivalent(, v[1], "toComparators("+v[0]+") === "+JSON.stringify(v[1]))
  })

  t.end()
})
